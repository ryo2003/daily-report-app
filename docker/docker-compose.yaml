version: '3'
services:
  nippo_app:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    ports:
      - "8501:8501"  # Maps port 8501 on your host to port 8501 in the container
    volumes:
      - ../myapp:/app       # Maps the current directory to /app in the container
    environment:
      - PYTHONUNBUFFERED=1
    command: >
      /bin/bash -c "
      pip install --no-cache-dir -r /app/docker/requirements.txt &&
      streamlit run app.py --server.port=8501 --server.address=0.0.0.0
      "
    restart: always
  mongodb:
    container_name: "mongodb"
    hostname: mongodb
    image: mongo
    restart: always
    ports:
      - 27017:27017
    volumes:
      - ./db:/data/db
      - ./configdb:/data/configdb
    environment:
      -  MONGO_URI=mongodb+srv://sakair0903:glW4l6U3XgTXCqoL@cluster-ootsuka.qpezv.mongodb.net/
