version: '3'
services:
  nippo_app:
    build:
      context: ..
      dockerfile: docker/Dockerfile	
    ports:
      - "8501:8501"  # Maps port 8501 on your host to port 8501 in the container
    volumes:
      - ../myapp:/app       # Maps the current directory to /app in the container
    environment:
      - PYTHONUNBUFFERED=1
    command: streamlit run app.py --server.port 8501
    restart: always
  mongodb:
    container_name: "mongodb"
    hostname: mongodb
    image: mongo
    restart: always
    ports:
      - 27017:27017
    volumes:
      - ./db:/data/db
      - ./configdb:/data/configdb
    environment:
      -  MONGO_URI=mongodb://root:password@mongo:27017/mydatabase?authSource=admin

